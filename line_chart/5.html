<!DOCTYPE html>
<html lang='en'>
  <head>
    <meta charset='UTF-8'>
    <meta name='viewport' content='width=device-width, initial-scale=1.0'>
    <meta http-equiv='X-UA-Compatible' content='ie=edge'>
    <title>Document</title>
    <style>
        #canvas{
            border:1px solid gray;
        }
    </style>
  </head>
  <body>
    <canvas id='canvas' width='800' height='600'></canvas>
<script>
      //=> 把点连起来

      var canvas = document.getElementById('canvas');
      var ctx = canvas.getContext('2d');
      var padding = 30;
      var x0 = padding;
      var y0 = canvas.height - padding;
      var x1 = padding;
      var y1 = padding;
      var x2 = canvas.width - padding;
      var y2 = canvas.height - padding;
      
      //坐标轴直线
      ctx.beginPath();
      ctx.moveTo(x1,y1);
      ctx.lineTo(x0,y0);
      ctx.lineTo(x2,y2);
      ctx.stroke();
      ctx.closePath();
      

      //画y轴坐标轴箭头
      ctx.beginPath();
      var arrawWidth = 10;
      var arrawHeight = 20;
      ctx.moveTo(x1,y1);
      ctx.lineTo(x1 - arrawWidth/2,y1 + arrawHeight);
      ctx.lineTo(x1,y1+arrawHeight/2);
      ctx.lineTo(x1 + arrawWidth/2,y1+arrawHeight);
      ctx.lineTo(x1,y1);
      ctx.fill();
      ctx.closePath();
      
      //画x轴坐标轴箭头
      ctx.beginPath();
      ctx.moveTo(x2,y2);
      ctx.lineTo(x2-arrawHeight,y2-arrawWidth/2);
      ctx.lineTo(x2-arrawHeight/2,y2);
      ctx.lineTo(x2-arrawHeight,y2+arrawWidth/2);
      ctx.fill();
      ctx.closePath();

      //注意：我这里给的是在我们画的坐标轴上的坐标
      var arr = [
          {x:9,y:35},
          {x:19,y:19},
          {x:29,y:39},
          {x:49,y:24}
      ];

      //数组坐标与canvas坐标的映射：
      //第一步：取最大的x值，y值，然后最大的x值映射x2值,最大的y值映射y2
      var maxX = -1;
      var maxY = -1;
      for(var i=0;i<arr.length;i++){
          if(maxX < arr[i].x) maxX = arr[i].x;
          if(maxY < arr[i].y) maxY = arr[i].y;
      }

      //第二步：算比例尺，也就是arr中的数据相当于真实的多少px
      var ruleX = x2 * 0.75 / maxX;//我这里保证的是让我们画的图不要太边缘了，在x,y轴的3/4处
      var ruleY = y2 * 0.75 / maxY;
      
      ctx.beginPath();
      var rectWidth = 10;//画的点是一个长10宽10的矩形
      var rectHeight = 10;
      for(var i=0;i<arr.length;i++){
          ctx.fillRect(arr[i].x * ruleX + padding / 2 - rectWidth / 2,arr[i].y * ruleY + padding / 2 - rectHeight / 2,rectWidth,rectHeight);
      }
      ctx.closePath();

      //画连线
      ctx.beginPath();
      ctx.moveTo(arr[0].x * ruleX +padding/2,arr[0].y * ruleY +padding/2);
      ctx.strokeStyle = 'red';
      for(var i=1;i<arr.length;i++){
          ctx.lineTo(arr[i].x*ruleX+padding/2,arr[i].y*ruleY+padding/2);
      }
      ctx.stroke();
      ctx.closePath();

      //这个图到此为止，画出来了，到这个时候，大家思考一个问题：
      //我们自己构建的坐标上的刻度一定也是px吗？和canvas世界里面的坐标有没有关系? --> 没有关系
      // 假如我们现在把arr数组中的数据的值换小一点，比如
    //   var arr = [
    //       {x:9,y:35},
    //       {x:19,y:19},
    //       {x:29,y:39},
    //       {x:49,y:24}
    //   ];
    //这个时候大家发现了什么?
    //我们应该根据我们的数据来调整一下我们自己画的坐标轴的刻度，一小格子代表的是多少
    
    </script>
  </body>
</html>